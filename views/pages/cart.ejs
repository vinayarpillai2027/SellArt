<%- include('../partials/head') %>
<%- include('../partials/nav', { active: '' }) %>

<main class="page-shell">
  <section class="section section--narrow">
    <div class="section-header">
      <h1 class="section-title">Your collection</h1>
      <p class="section-body">
        Review the works you’ve selected. Pieces are reserved for a limited time while in your cart.
      </p>
    </div>

    <% if (!cart || !cart.length) { %>
      <div class="empty-state glass-soft">
        <p class="empty-title">Your collection is currently empty.</p>
        <p class="empty-body">
          Explore the gallery and add pieces you’d like to live with every day.
        </p>
        <a href="/shop" class="btn btn-primary">Browse the gallery</a>
      </div>
    <% } else { %>
      <div class="cart-layout">
        <div class="cart-items glass-elevated">
          <% cart.forEach(function (item) { %>
            <article class="cart-item">
              <div class="cart-item-media">
                <div class="cart-item-faux-image" aria-hidden="true"></div>
              </div>
              <div class="cart-item-body">
                <h2 class="cart-item-title"><%= item.title %></h2>
                <p class="cart-item-artist"><%= item.artist %></p>
                <p class="cart-item-meta">
                  <span>Quantity: <%= item.quantity %></span>
                </p>
                <p class="cart-item-price">
                  $<%= (item.price * item.quantity).toLocaleString() %>
                  <span class="cart-item-unit">($<%= item.price.toLocaleString() %> each)</span>
                </p>
              </div>
              <div class="cart-item-actions">
                <form action="/cart/remove/<%= item.id %>" method="POST">
                  <button type="submit" class="btn btn-outline btn-small">Remove</button>
                </form>
              </div>
            </article>
          <% }); %>
        </div>

        <aside class="cart-summary glass-elevated">
          <h2 class="summary-title">Summary</h2>
          <div class="summary-row">
            <span>Subtotal</span>
            <span>$<%= total.toLocaleString() %></span>
          </div>
          <p class="summary-note">
            Shipping and framing are calculated at checkout. All works ship fully insured with tracking.
          </p>
          <button class="btn btn-primary btn-large" disabled>Proceed to secure checkout</button>
          <form action="/cart/clear" method="POST" class="summary-secondary">
            <button type="submit" class="btn btn-ghost btn-small">Clear cart</button>
          </form>
        </aside>
      </div>
    <% } %>
  </section>
</main>

<%- include('../partials/footer') %>

